# author Russell Jarvis rjjarvis@asu.edu
# author Rick Gerkin rgerkin@asu.edu
# neuronunit-showcase

FROM scidash/neuronunit-optimization
# RUN conda update -n base conda
USER $NB_USER

# RUN pip uninstall tornado
# move to a docker install script.
RUN sudo /opt/conda/bin/pip install --upgrade pip
#RUN sudo /opt/conda/bin/pip install git+https://github.com/scidash/sciunit.git@dev --process-dependency-links --upgrade
#RUN sudo /opt/conda/bin/conda install -y cython

RUN sudo /opt/conda/bin/pip install git+https://github.com/brian-team/brian2.git
# faster glif
# RUN sudo /opt/conda/bin/pip install allensdk --upgrade
# RUN sudo /opt/conda/bin/conda install -y numpy deap dask numba
# RUN sudo /opt/conda/bin/pip install allensdk --upgrade

RUN sudo /opt/conda/bin/pip install git+git://github.com/BlueBrain/eFEL

WORKDIR $HOME
RUN git clone https://github.com/AllenInstitute/sonata
WORKDIR src/pysonata
RUN python setup.py install

RUN git clone https://github.com/AllenInstitute/bmtk.git
WORKDIR bmtk
RUN python setup.py install

